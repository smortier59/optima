{* Tableau de bord 
<div id="dashBoard" style="padding-left:2em"></div>

<script type="text/javascript">/*<![CDATA[*/
	{include file="generic-tabs.tpl.js"}
/*]]>*/</script>*}


	<div id="widgets" style="padding-left:2em"></div>

	{$colspan=2}
	{$widgets=ATF::accueil()->getWidgets()}
	
	
	
	<script type="text/javascript">/*<![CDATA[*/
		Ext.onReady(function(){
			try {
				new Ext.Panel({
					renderTo:'widgets',
					title: 'Bonjour et bienvenue sur Optima, {ATF::user()->nom(ATF::$usr->getID())}.',
					layout:'column',
					items:[
						{for $colNumber=0; $colNumber<$colspan; $colNumber++}  
							{if $colNumber},{/if}
							{
								columnWidth:{1/$colspan},
								layout: 'form',
								bodyStyle:'padding:5px 15px 5px 15px',
								border: false,
								autoWidth:false,
								items: [
									{foreach from=$widgets key=key item=item}
										{if ($item@index%$colspan)===$colNumber}											
											{if $item@index>=$colspan}
											,
											{/if}											
											{
												xtype:'panel',
												autoWidth:true,
												bodyStyle:'margin:10px 0 5px 0',
												items: [
													{
														xtype: 'panel', 
														title: 'Indicateur',
														frame: true,
														border: false,
														autoWidth:true,
														autoLoad:{ url: '{$item.module},widget.ajax', scripts:true }
													}
												]

											}
										{/if}
									{/foreach}
								]
							}
						{/for}
					]
				});
				
			} catch(e) {
				console.log(e); 
			}
		});
	/*]]>*/</script>




<div class="Bloc">
    {include file="generic-onglets.tpl.htm" onglets=ATF::accueil()->onglets current_class=null}
</div>

{* Affichage des news *}
{if ATF::news()->isNews()}
	<div id="newsBoard">
		<div id="news"></div>
	</div>
	
	<script type="text/javascript">/*<![CDATA[*/
		{include file="generic-news.tpl.js"}
	/*]]>*/</script>
{/if}