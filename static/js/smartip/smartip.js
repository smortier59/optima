var Stip={v:"1.2.2",config:{zIndex:42000}};Object.extend(Stip,{debug:false,required:[{lib:"Prototype",v:"1.6"}],log:function(a){if(!Stip.debug){return}if(Prototype.Browser.IE){return}if((typeof console!="undefined")&&(typeof console.log!="undefined")){console.log(a)}},defaultOptions:{},init:function(){this.checkRequired();if(!(this.canvasSupport=!!document.createElement("canvas").getContext)){if(document.documentMode>=8&&!document.namespaces.ie_vml){document.namespaces.add("ie_vml","urn:schemas-microsoft-com:vml","#default#VML")}else{document.observe("dom:loaded",function(){document.createStyleSheet().addRule("ie_vml\\:*","behavior: url(#default#VML);")})}}},setDefaultOptions:function(a){this.defaultOptions=a},getDefaultOptions:function(){return this.defaultOptions},checkRequired:function(){for(var a=0;a<this.required.length;a++){if((typeof window[this.required[a].lib]=="undefined")||!window[this.required[a].lib].Version||this.required[a].v>window[this.required[a].lib].Version.substr(0,this.required[a].v.length)){throw ("[Stip] Please make sure that all required libraries are installed, thank you ("+this.required[a].lib+" must be greater or equal than version "+this.required[a].v+").");return false}}return true},camelCase:function(a){for(var b=/-([a-z])/;b.test(a);a=a.replace(b,RegExp.$1.toUpperCase())){}return a},getStyle:function(f,b){var c=null;if(document.defaultView&&document.defaultView.getComputedStyle){var d=document.defaultView.getComputedStyle(f,null);if(d&&d.getPropertyValue){c=d.getPropertyValue(b)}}if(!c&&f.currentStyle){c=f.currentStyle[this.camelCase(b)]}return c},overlayOwner:null,visible:[],tips:[],add:function(b,c,a){if(Object.isString(b)){elmt=$(b)}else{if(Object.isElement(b)){elmt=b}else{if(Object.isElement(b.srcElement)){elmt=b.srcElement}}}if(elmt){elmt.onmouseover="";var d="tip";if(a&&a.id){d=a.id}if(!elmt.stip){elmt.stip=new Object()}if(!elmt.stip[d]){this.tips.push(elmt.stip[d]=new this.tip(elmt,c,a))}return elmt.stip[d]}else{throw ("Stip: DOM Element '"+b+"' not found !");return false}},addNow:function(c,b,a){if(c.currentTarget&&$(c.currentTarget)){return this.add(c.currentTarget,b,a).display(c)}else{return this.add(c,b,a).display()}},del:function(a){if(a&&a.destroy){a.destroy();this.tips=this.tips.without(a);delete a}},delAll:function(a){this.hideAll(null,a);this.tips.each(function(b){if(!a||b.options.group==a){this.del(b)}}.bind(this))},addVisible:function(a){a.tipVisible=true;this.visible.push(a)},delVisible:function(a){if(a.tipVisible){delete a.tipVisible}this.visible=this.visible.without(a)},hideAll:function(a,b){this.visible.invoke("hideAllUndisplay",a,b)},__mirror:{left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",vertical:"horizontal",horizontal:"vertical"},arrowMirror:function(a){return this.__mirror[a]},attach:function(a,b){return},setHighest:function(a){if(a.style.zIndex<this.config.zIndex){a.setStyle({zIndex:this.config.zIndex++})}},setLowest:function(a){if(a.style.zIndex>-100){a.setStyle({zIndex:-100})}},showOverlay:function(b,a){if(!this.overlay){this.overlay=new Element("div",{id:"smartipOverlay",style:"opacity: 0"});$(document.body).insert(this.overlay)}this.options=Object.extend({overlayOpacity:0.65,overlayDuration:0.3},a);new Effect.Fade(this.overlay,{from:this.overlay.getStyle("opacity"),to:this.options.overlayOpacity,duration:this.options.overlayDuration,afterFinish:function(){b()}.bind(this)})},hideOverlay:function(){new Effect.Fade(this.overlay,{from:this.options.overlayOpacity,to:0,duration:this.options.overlayDuration,afterFinish:function(){Stip.log("Stip.hideOverlay() - overlayRemove");this.overlay.remove();delete this.overlay}.bind(this)})},tip:Class.create({initialize:function(d,c,a){Stip.log("Stip.tip.initialize()");this.source=$(d);Stip.del(this.source);if(Object.isString(c)){this.content=new Element("div").update(c)}else{if(Object.isElement(c)){this.content=c}else{if(c&&!a){a=c;this.content='<div class="smartipLoader"></div>'}else{throw ("Stip: Content not defined !");return false}}}this.options={};if(a&&!a.noDefault){this.options=Object.extend(this.options,Stip.defaultOptions)}this.options=Object.extend(this.options,a);this.options=Object.extend({borderSize:1,id:"tip",radius:0,arrow:false,arrowBase:10,title:false,titleHeight:false,overflow:false,width:false,maxWidth:false,target:this.source,fadeDuration:false,offset:{x:16,y:16},position:"rightBottom",attach:false,closeButton:false,css:false,hideAll:true,hideAllImmune:false,overlay:false,overlayImmune:false,delay:0,url:false,urlPost:"",advancedText:false,urlAdvancedText:false,listeners:true,callback:{offset:function(){return{top:0,left:0}},beforeDisplay:false,afterHide:false}},this.options);for(var b in this.options.callback){if(this.options.callback[b]){this.options.callback[b]=this.options.callback[b].bind(this)}}this.target=$(this.options.target);this.options.offset={left:this.options.offset.x,top:this.options.offset.y};if(this.options.overlay){this.options.attach=true;if(!this.options.overlayImmune){this.options.overlayImmune=[this.target]}}if(this.options.attach){this.options.overflow=true}if(this.options.arrow){if(this.options.arrow===true||this.options.arrow<=0){this.options.arrow=10}}$w("height width titleHeight").each((function(e){if(this.options[e]&&this.options[e]!="auto"){this.options[e]=this.options[e]+"px"}else{this.options[e]="auto"}}).bind(this));if(this.options.position){this.options.position=this.options.position.toLowerCase()}if(this.options.listeners){this.bindListerners()}},destroy:function(){Stip.log("Stip.destroy()");if(this.div){this.target.stopObserving();if(this.div.parentNode){this.div.remove()}}},bindListerners:function(){this.target.observe("mouseenter",this.mouseover.bind(this));this.target.observe("mouseleave",this.mouseout.bind(this));this.target.observe("click",this.mouseclick.bind(this));if(!this.options.attach){this.target.observe("mousemove",this.positionne.bind(this))}},positionne:function(a){Stip.log("Stip.tip.positionne()");if(this.div){if(this.options.attach){this.options.offset={left:this.target.getWidth(),top:this.target.getHeight()};switch(this.options.position){case"rightbottom":case"bottomright":break;case"right":case"rightmiddle":this.options.offset.top/=2;this.options.offset.top-=this.div.getHeight()/2;break;case"lefttop":case"topleft":this.options.offset.left=0;this.options.offset.left-=this.div.getWidth();case"righttop":case"topright":this.options.offset.top=0;this.options.offset.top-=this.div.getHeight();break;case"left":case"leftmiddle":this.options.offset.top/=2;this.options.offset.top-=this.div.getHeight()/2;case"leftbottom":case"bottomleft":this.options.offset.left=0;this.options.offset.left-=this.div.getWidth();break;case"top":case"topmiddle":this.options.offset.top=0;this.options.offset.top-=this.div.getHeight();case"bottom":case"bottommiddle":this.options.offset.left/=2;this.options.offset.left-=this.div.getWidth()/2;break}var b=this.options.callback.offset();var d={x:this.options.offset.left+this.target.cumulativeOffset().left-b.left,y:this.options.offset.top+this.target.cumulativeOffset().top-b.top}}else{var d={x:this.options.offset.left,y:this.options.offset.top};if(a){d.x+=Event.pointerX(a);d.y+=Event.pointerY(a)}}this.div.setStyle({top:d.y+"px",left:d.x+"px"})}if(!this.options.overflow&&this.div){var c=this.getPositionWithinViewport(this.div.cumulativeOffset());if(this.options.arrow&&this.options.position!=c.newPosition){this.positionneFleche(c.newPosition)}this.div.setStyle({top:c.position.top+"px",left:c.position.left+"px"})}},positionneFleche:function(a){this.flecheUpdated=false;this.options.position=a;this.fleche()},getPositionWithinViewport:function(g){var c=this.options.position,b=this.div.getDimensions(),a=document.viewport.getScrollOffsets(),e=document.viewport.getDimensions(),f={left:"width",top:"height"};for(var d in f){if((g[d]+b[f[d]]-a[d=="left"?0:1]+this.options.offset[d])>e[f[d]]){g[d]=g[d]-(b[f[d]]+(this.options.offset[d]*2));if(this.options.arrow){if(d=="left"){c=c.replace("left","LEFT").replace("right","left").replace("LEFT","right")}else{c=c.replace("top","TOP").replace("bottom","top").replace("TOP","bottom")}}}}return{position:g,newPosition:c}},overlayOn:function(){this.overlayed=true;if(Stip.overlayOwner){Stip.overlayOwner.overlayOff(true)}Stip.overlayOwner=this;for(var a=0;a<this.options.overlayImmune.length;a++){var b=$(this.options.overlayImmune[a]);if(b){b.saveOldZIndex=b.getStyle("z-index")||1;b.setStyle("position:relative");if(b.up()&&!b.up().getStyle("position")){b.up().setStyle("position:relative")}b.setStyle("z-index:"+(parseInt(Stip.overlay.getStyle("z-index"))+1));Stip.log("overlayOn ("+b.id+") saved="+b.saveOldZIndex+" now="+b.getStyle("z-index"))}}this.display();if(this.options.overlay!=="static"){Stip.overlay.observe("click",this.undisplay.bind(this))}},overlayOff:function(b){Stip.log("forced = "+b);this.overlayed=false;if(!b){Stip.log("effacement overlay pas forcÃ©");Stip.overlayOwner=null;Stip.hideOverlay()}for(var a=0;a<this.options.overlayImmune.length;a++){var c=$(this.options.overlayImmune[a]);if(c){c.setStyle("z-index:"+c.saveOldZIndex);Stip.log("overlayOff saved="+c.saveOldZIndex+" now="+c.getStyle("z-index"))}}},mouseclick:function(a){if(this.tipVisible){this.display(a)}else{this.undisplay()}},mouseover:function(a){this.display(a)},delayAdvancedTextStart:function(){Stip.log("Stip.tip.delayAdvancedTextStart()");if(!this.ajaxContentAdvancedTexte&&(this.options.urlAdvancedText||this.options.advancedText)){if(this.delayAdvancedText&&this.delayAdvancedText.cancel){this.delayAdvancedText.cancel()}Stip.log("Stip.tip.delayAdvancedTextStart() 2");this.delayAdvancedText=new Effect.Opacity(this.source,{duration:2,from:this.source.getStyle("opacity"),to:this.source.getStyle("opacity"),afterFinish:function(){Stip.log("Stip.tip.delayAdvancedTextStart() 3");delete this.delayAdvancedText;if(this.options.urlAdvancedText){new Ajax.Request(this.options.urlAdvancedText,{method:"post",onSuccess:function(a){this.options.advancedText=a.responseText;this.fadeInAdvancedText()}.bind(this)})}else{this.fadeInAdvancedText()}}.bind(this)})}},fadeInAdvancedText:function(){Stip.log("Stip.tip.fadeInAdvancedText() "+this.options.advancedText);this.ajaxContentAdvancedTexte=true;this.div.setStyle({width:"300px"});this.div.contentContainer.content.update(this.options.advancedText);this.syncHeights();this.positionneFleche(this.options.position);this.positionne()},display:function(b,a){Stip.log("Stip.tip.display()");if(this.options.delay>0&&!a){if(this.delayed&&this.delayed.cancel){this.delayed.cancel()}this.delayed=new Effect.Opacity(this.source,{duration:this.options.delay,from:this.source.getStyle("opacity"),to:this.source.getStyle("opacity"),afterFinish:function(){Stip.log("Stip.tip.display() timer finished");this.delayed=true;this.display(b,true)}.bind(this)});return}Stip.log("Stip.tip.display() 2");if(this.delayed){delete this.delayed}this.delayAdvancedTextStart();if(this.options.overlay&&!this.overlayed){Stip.showOverlay(this.overlayOn.bind(this));return}if(this.options.callback.beforeDisplay){this.options.callback.beforeDisplay()}if(!this.tipVisible){if(!this.div){this.build()}if(this.options.hideAll){Stip.hideAll()}if(this.div){if(this.options.fadeDuration){this.div.setStyle({opacity:0});this.div.show();if(this.effect){this.effect.cancel()}this.effect=new Effect.Opacity(this.div,{duration:this.options.fadeDuration,transition:Effect.Transitions.sinoidal,from:0,to:1,afterFinish:(function(){Stip.setHighest(this.div)}).bind(this)})}else{this.div.show()}}Stip.addVisible(this)}this.positionne(b);if(!this.ajaxContent&&this.options.url){new Ajax.Updater(this.div.contentContainer.content,this.options.url,{postBody:this.options.urlPost,onComplete:function(c){this.ajaxContent=true;this.syncHeights();this.positionneFleche(this.options.position);this.positionne()}.bind(this)})}Stip.setHighest(this.div)},cancelDelay:function(){if(this.delayed&&this.delayed.cancel){this.delayed.cancel()}if(this.delayAdvancedText&&this.delayAdvancedText.cancel){this.delayAdvancedText.cancel()}},mouseout:function(a){Stip.log("Stip.tip.mouseout()");this.cancelDelay();if(!this.options.closeButton&&!this.options.overlay){this.undisplay()}},hideAllUndisplay:function(a,b){if(!b||this.options.group==b){if(this.options.hideAllImmune===false||a){this.undisplay()}}},undisplay:function(){Stip.log("Stip.tip.undisplay()");this.cancelDelay();if(this.tipVisible){if(this.options.fadeDuration){if(this.effect){this.effect.cancel()}this.effect=new Effect.Opacity(this.div,{duration:this.options.fadeDuration,transition:Effect.Transitions.sinoidal,from:1,to:0,afterFinish:(function(){Stip.setLowest(this.div);Stip.delVisible(this);if(this.options.callback.afterHide){this.options.callback.afterHide()}}).bind(this)})}else{this.div.hide();Stip.delVisible(this);if(this.options.callback.afterHide){this.options.callback.afterHide()}}if(this.overlayed){this.overlayOff()}}},build:function(){if(document.loaded){this.buildHTML()}else{document.observe("dom:loaded",this.buildHTML.bind(this))}},buildHTML:function(){if(!this.isBuildingHTML&&!this.div){this.isBuildingHTML=true;this.div=new Element("div");if(this.options.css){this.div.addClassName(this.options.css)}this.div.addClassName("smartip");this.div.setStyle({height:this.options.height,width:this.options.width});if(this.options.fadeDuration){this.div.setStyle({display:"none"});this.div.setOpacity(0)}else{this.div.setStyle({display:"none"})}if(this.options.arrow){this.div.insert(this.div.fleche=new Element("div",{className:"fleche"}))}this.div.insert(this.div.borders=new Element("div",{className:"borders"}));this.options.borderSize=this.options.radius>this.options.borderSize?this.options.radius:this.options.borderSize;this.div.insert(this.div.contentContainer=new Element("div",{className:"contentContainer"}).setStyle({padding:this.options.borderSize+"px"}));this.div.borders.insert((new Element("div",{className:"bdrRow"}).setStyle({height:this.options.borderSize+"px"})).insert((new Element("div",{className:"absoluteContainer"}).setStyle({height:this.options.borderSize+"px"})).insert(this.div.borders.tl=new Element("div",{className:"bdrRowLeftContent"}).setStyle({width:this.options.borderSize+"px",height:this.options.borderSize+"px"}))).insert((new Element("div",{className:"absoluteContainer"}).setStyle({height:this.options.borderSize+"px"})).insert(new Element("div",{className:"between"}).setStyle({height:this.options.borderSize+"px",margin:"0 "+this.options.borderSize+"px"}).addClassName("borderColor"))).insert((new Element("div",{className:"absoluteContainer"}).setStyle({height:this.options.borderSize+"px"})).insert(this.div.borders.tr=new Element("div",{className:"bdrRowRightContent"}).setStyle({width:this.options.borderSize+"px",height:this.options.borderSize+"px"})))).insert((this.div.borders.middle=new Element("div",{className:"bdrRow"}).setStyle({height:this.options.borderSize+"px"}).addClassName("borderColor"))).insert((new Element("div",{className:"bdrRow"}).setStyle({height:this.options.borderSize+"px"})).insert((new Element("div",{className:"absoluteContainer"}).setStyle({height:this.options.borderSize+"px"})).insert(this.div.borders.bl=new Element("div",{className:"bdrRowLeftContent"}).setStyle({width:this.options.borderSize+"px",height:this.options.borderSize+"px"}))).insert((new Element("div",{className:"absoluteContainer"}).setStyle({height:this.options.borderSize+"px"})).insert(new Element("div").setStyle({height:this.options.borderSize+"px",margin:"0 "+this.options.borderSize+"px"}).addClassName("borderColor"))).insert((new Element("div",{className:"absoluteContainer"}).setStyle({height:this.options.borderSize+"px"})).insert(this.div.borders.br=new Element("div",{className:"bdrRowRightContent"}).setStyle({width:this.options.borderSize+"px",height:this.options.borderSize+"px"}))));if(this.options.title){this.div.contentContainer.insert(this.div.contentContainer.bar=new Element("div",{className:"bar"}).setStyle({height:this.options.titleHeight}));this.div.contentContainer.bar.insert(new Element("div",{className:"title"}).update(this.options.title));if(this.options.closeButton===true){this.div.contentContainer.bar.insert(this.div.contentContainer.bar.closeButton=new Element("div",{className:"close"}));this.div.contentContainer.bar.closeButton.observe("click",this.undisplay.bind(this))}else{if(cb=$(this.options.closeButton)){cb.observe("click",this.undisplay.bind(this))}}this.div.contentContainer.bar.insert(new Element("div").setStyle({clear:"both"}))}this.div.contentContainer.insert(this.div.contentContainer.content=new Element("div",{className:"content"}).update(this.content));$(document.body).insert(this.div);if(this.options.borderSize){this.options.borderColor=Stip.getStyle(this.div.borders.middle,"background-color");$w("tl tr bl br").each(function(b){if(this.options.radius){Stip.coinArrondi(this.div.borders[b],b,{backgroundColor:this.options.borderColor,border:this.options.borderSize,radius:this.options.radius})}else{this.div.borders[b].addClassName("borderColor")}}.bind(this));this.syncHeights()}this.fleche();var a=this.target.cumulativeScrollOffset();a={left:a.left+this.div.cumulativeOffset().left,top:a.top+this.div.cumulativeOffset().top};this.div.setStyle(a);this.div.setStyle({width:(this.div.getWidth())+"px"});if(this.div.contentContainer&&this.div.contentContainer.bar&&this.div.contentContainer.bar.closeButton){this.div.contentContainer.bar.closeButton.setStyle({cssFloat:"right"})}delete this.isBuildingHTML}},syncHeights:function(a){if(!this.options.width||this.options.url){this.div.setStyle({width:"auto"})}if(this.options.maxWidth&&(this.div.getWidth()-this.options.borderSize*2)>this.options.maxWidth){this.div.setStyle({width:this.options.maxWidth+"px"})}else{this.div.setStyle({width:(this.div.getWidth()-this.options.borderSize*2)+"px"})}this.div.borders.middle.setStyle({height:(this.div.getHeight()-this.options.borderSize*2)+"px"})},fleche:function(){if(this.options.arrow){this.options.offset={left:0,top:0};var d={left:0,top:0},f=[{left:0,top:0},{left:0,top:0},{left:0,top:0}];var e=this.options.arrow*Math.sqrt(2)/2;switch(this.options.position){case"rightbottom":case"bottomright":d.left=this.options.offset.left;d.top=this.options.offset.top;f[1].left=e+this.options.arrowBase/2;f[1].top=e;f[2].left=e;f[2].top=e+this.options.arrowBase/2;this.options.offset.left+=e;this.options.offset.top+=e;break;case"right":case"rightmiddle":d.left=this.options.offset.left;d.top=this.options.offset.top+this.div.getHeight()/2-this.options.arrowBase/2;f[0].top=this.options.arrowBase/2;f[1].left=this.options.arrow;f[2].left=this.options.arrow;f[2].top=this.options.arrowBase;this.options.offset.left+=this.options.arrow;break;case"righttop":case"topright":d.left=this.options.offset.left;d.top=this.options.offset.top+this.div.getHeight()-e-this.options.arrowBase/2;f[0].top=e+this.options.arrowBase/2;f[1].left=e;f[2].left=e+this.options.arrowBase/2;f[2].top=this.options.arrowBase/2;this.options.offset.left+=e;this.options.offset.top-=e;break;case"bottom":case"bottommiddle":d.left=this.options.offset.left+this.div.getWidth()/2-this.options.arrowBase/2;d.top=this.options.offset.top;f[0].left=this.options.arrowBase/2;f[1].left=this.options.arrowBase;f[1].top=this.options.arrow;f[2].top=this.options.arrow;this.options.offset.top+=this.options.arrow;break;case"leftbottom":case"bottomleft":d.left=this.options.offset.left+this.div.getWidth()-e-this.options.arrowBase/2;d.top=this.options.offset.top;f[0].left=e+this.options.arrowBase/2;f[1].top=e;f[2].left=this.options.arrowBase/2;f[2].top=this.options.arrowBase;this.options.offset.left-=e;this.options.offset.top+=e;break;case"top":case"topmiddle":d.left=this.options.offset.left+this.div.getWidth()/2-this.options.arrowBase/2;d.top=this.options.offset.top+this.div.getHeight()-this.options.arrow;f[0].left=this.options.arrowBase/2;f[0].top=this.options.arrow;f[1].left=this.options.arrowBase;this.options.offset.top-=this.options.arrow;break;case"left":case"leftmiddle":d.left=this.options.offset.left+this.div.getWidth()-this.options.arrow;d.top=this.options.offset.top+this.div.getHeight()/2-this.options.arrowBase/2;f[0].left=this.options.arrow;f[0].top=this.options.arrowBase/2;f[2].top=this.options.arrowBase;this.options.offset.left-=this.options.arrow;break;case"lefttop":case"topleft":d.left=this.options.offset.left+this.div.getWidth()-e-this.options.arrowBase/2;d.top=this.options.offset.top+this.div.getHeight()-e-this.options.arrowBase/2;f[0].left=e+this.options.arrowBase/2;f[0].top=e+this.options.arrowBase/2;f[1].top=this.options.arrowBase/2;f[2].left=this.options.arrowBase/2;this.options.offset.left-=e;this.options.offset.top-=e;break}var a={left:0,top:0};for(var c=0;c<3;c++){a.top=Math.max(f[c].top,a.top);a.left=Math.max(f[c].left,a.left)}this.div.borders.setStyle(Stip.addPx(this.options.offset));this.div.contentContainer.setStyle(Stip.addPx(this.options.offset));this.div.fleche.setStyle(Stip.addPx(d));if(!(!document.createElement("canvas").getContext)){if(!this.flecheUpdated&&this.div.fleche.canvas){this.div.fleche.canvas.remove();delete this.div.fleche.canvas}if(!this.div.fleche.canvas){this.div.fleche.canvas=new Element("canvas",{width:a.left+"px",height:a.top+"px"})}fleche=this.div.fleche.canvas;this.div.fleche.insert(fleche);var b=fleche.getContext("2d");b.fillStyle=this.options.borderColor;b.beginPath();b.moveTo(f[0].left,f[0].top);b.lineTo(f[1].left,f[1].top);b.lineTo(f[2].left,f[2].top);b.lineTo(f[0].left,f[0].top);b.fill()}else{if(!this.div.fleche.canvas){this.div.fleche.canvas=new Element("ie_vml:shape",{path:"M "+Math.round(f[0].left)+","+Math.round(f[0].top)+" L "+Math.round(f[1].left)+","+Math.round(f[1].top)+", "+Math.round(f[2].left)+","+Math.round(f[2].top)+" X E",fillcolor:this.options.borderColor,strokeWeight:"1px",strokeColor:this.options.borderColor,coordorigin:"0 0",coordsize:Math.round(a.left)+" "+Math.round(a.top)})}fleche=this.div.fleche.canvas;fleche.setStyle({width:Math.round(a.left)+"px",height:Math.round(a.top)+"px",position:"absolute"});this.div.fleche.insert(fleche);fleche.outerHTML=fleche.outerHTML}this.flecheUpdated=true}}}),addPx:function(a){var a=Object.clone(a);if(Object.isString(a)){return a+"px"}for(i in a){a[i]=a[i]+"px"}return a},coinArrondi:function(f,a,e){e=e||this.options,pos={left:(a=="tl"||a=="bl"),top:(a=="tl"||a=="tr")};if(!(!document.createElement("canvas").getContext)){var d=new Element("canvas",{width:e.border+"px",height:e.border+"px"});f.insert(d);var c=d.getContext("2d");c.fillStyle=e.backgroundColor;c.arc((pos.left?e.radius:e.border-e.radius),(pos.top?e.radius:e.border-e.radius),e.radius,0,Math.PI*2,true);c.fill();c.fillRect((pos.left?e.radius:0),0,e.border-e.radius,e.border);c.fillRect(0,(pos.top?e.radius:0),e.border,e.border-e.radius)}else{f.insert(coin=new Element("div").setStyle({margin:0,padding:0,position:"relative",display:"block",width:e.border+"px",height:e.border+"px",overflow:"hidden"}));var b=new Element("ie_vml:roundrect",{fillcolor:e.backgroundColor,strokeWeight:"1px",strokeColor:e.backgroundColor,arcSize:(e.radius/e.border*0.5).toFixed(2)}).setStyle({width:2*e.border-1+"px",height:2*e.border-1+"px",position:"absolute",left:(pos.left?0:(-1*e.border))+"px",top:(pos.top?0:(-1*e.border))+"px"});coin.insert(b);b.outerHTML=b.outerHTML}}}).init();